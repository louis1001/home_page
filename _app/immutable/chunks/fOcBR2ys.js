function O(){}const qe=e=>e;function ot(e,t){for(const n in t)e[n]=t[n];return e}function bt(e){return e()}function F(e){e.forEach(bt)}function Ye(e){return typeof e=="function"}function re(e,t){return e!=e?t==t:e!==t}function It(e){return Object.keys(e).length===0}function Ct(e,...t){if(e==null)return O;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function de(e,t,n){e.$$.on_destroy.push(Ct(t,n))}function Ee(e){return e&&Ye(e.destroy)?e.destroy:O}let Ve=()=>globalThis.performance.now(),Je=e=>requestAnimationFrame(e);const pe=new Set;function kt(e){pe.forEach(t=>{t.c(e)||(pe.delete(t),t.f())}),pe.size!==0&&Je(kt)}function Ke(e){let t;return pe.size===0&&Je(kt),{promise:new Promise(n=>{pe.add(t={c:e,f:n})}),abort(){pe.delete(t)}}}function he(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function L(e){e.parentNode.removeChild(e)}function $(e){return document.createElement(e)}function Et(e){return document.createTextNode(e)}function Ce(){return Et("")}function B(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function M(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function C(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n)}function R(e,t,n){e.classList[n?"add":"remove"](t)}function $t(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}let me,Ue=0,Be={};function yt(e,t,n,i,r,o,l,f=0){const s=16.666/i;let c=`{
`;for(let d=0;d<=1;d+=s){const p=t+(n-t)*o(d);c+=d*100+`%{${l(p,1-p)}}
`}const u=c+`100% {${l(n,1-n)}}
}`,a=`_bp_${Math.round(Math.random()*1e9)}_${f}`;if(!Be[a]){if(!me){const d=$("style");document.head.appendChild(d),me=d.sheet}Be[a]=!0,me.insertRule(`@keyframes ${a} ${u}`,me.cssRules.length)}const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${a} ${i}ms linear ${r}ms 1 both`,Ue+=1,a}function Fe(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?n=>n.indexOf(t)<0:n=>n.indexOf("_bp")===-1).join(", "),t&&!--Ue&&St()}function St(){Je(()=>{if(Ue)return;let e=me.cssRules.length;for(;e--;)me.deleteRule(e);Be={}})}let Ge;function Me(e){Ge=e}const ze=[],st=[],Oe=[],lt=[],Dt=Promise.resolve();let Ze=!1;function Pt(){Ze||(Ze=!0,Dt.then(wt))}function te(e){Oe.push(e)}const Xe=new Set;let He=0;function wt(){const e=Ge;do{for(;He<ze.length;){const t=ze[He];He++,Me(t),Lt(t.$$)}for(Me(null),ze.length=0,He=0;st.length;)st.pop()();for(let t=0;t<Oe.length;t+=1){const n=Oe[t];Xe.has(n)||(Xe.add(n),n())}Oe.length=0}while(ze.length);for(;lt.length;)lt.pop()();Ze=!1,Xe.clear(),Me(e)}function Lt(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}let Te;function vt(){return Te||(Te=Promise.resolve(),Te.then(()=>{Te=null})),Te}function Ae(e,t,n){e.dispatchEvent($t(`${t?"intro":"outro"}${n}`))}const Re=new Set;let G;function ne(){G={r:0,c:[],p:G}}function ie(){G.r||F(G.c),G=G.p}function T(e,t){e&&e.i&&(Re.delete(e),e.i(t))}function E(e,t,n,i){if(e&&e.o){if(Re.has(e))return;Re.add(e),G.c.push(()=>{Re.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}}const Tt={duration:0};function zt(e,t,n){let i=t(e,n),r=!1,o,l,f=0;function s(){o&&Fe(e,o)}function c(){const{delay:a=0,duration:g=300,easing:d=qe,tick:p=O,css:_}=i||Tt;_&&(o=yt(e,0,1,g,a,d,_,f++)),p(0,1);const k=Ve()+a,H=k+g;l&&l.abort(),r=!0,te(()=>Ae(e,!0,"start")),l=Ke(A=>{if(r){if(A>=H)return p(1,0),Ae(e,!0,"end"),s(),r=!1;if(A>=k){const y=d((A-k)/g);p(y,1-y)}}return r})}let u=!1;return{start(){u||(u=!0,Fe(e),Ye(i)?(i=i(),vt().then(c)):c())},invalidate(){u=!1},end(){r&&(s(),r=!1)}}}function ge(e,t,n){let i=t(e,n),r=!0,o;const l=G;l.r+=1;function f(){const{delay:s=0,duration:c=300,easing:u=qe,tick:a=O,css:g}=i||Tt;g&&(o=yt(e,1,0,c,s,u,g));const d=Ve()+s,p=d+c;te(()=>Ae(e,!1,"start")),Ke(_=>{if(r){if(_>=p)return a(0,1),Ae(e,!1,"end"),--l.r||F(l.c),!1;if(_>=d){const k=u((_-d)/c);a(1-k,k)}}return r})}return Ye(i)?vt().then(()=>{i=i(),f()}):f(),{end(s){s&&i.tick&&i.tick(1,0),r&&(o&&Fe(e,o),r=!1)}}}function be(e){e&&e.c()}function oe(e,t,n,i){const{fragment:r,on_mount:o,on_destroy:l,after_update:f}=e.$$;r&&r.m(t,n),i||te(()=>{const s=o.map(bt).filter(Ye);l?l.push(...s):F(s),e.$$.on_mount=[]}),f.forEach(te)}function se(e,t){const n=e.$$;n.fragment!==null&&(F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ht(e,t){e.$$.dirty[0]===-1&&(ze.push(e),Pt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $e(e,t,n,i,r,o,l,f=[-1]){const s=Ge;Me(e);const c=e.$$={fragment:null,ctx:null,props:o,update:O,not_equal:r,bound:{},on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:{},dirty:f,skip_bound:!1,root:t.target||s.$$.root};l&&l(c.root);let u=!1;c.ctx=n?n(e,t.props||{},(a,g,...d)=>{const p=d.length?d[0]:g;return c.ctx&&r(c.ctx[a],c.ctx[a]=p)&&(!c.skip_bound&&c.bound[a]&&c.bound[a](p),u&&Ht(e,a)),g}):[],c.update(),u=!0,F(c.before_update),c.fragment=i?i(c.ctx):!1,t.target&&(c.fragment&&c.fragment.c(),oe(e,t.target,t.anchor,t.customElement),wt()),Me(s)}class Se{$destroy(){se(this,1),this.$destroy=O}$on(t,n){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(t){this.$$set&&!It(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Qe(e){const t=e-1;return t*t*t+1}function Q(e,{delay:t=0,duration:n=400,easing:i=Qe,x:r=0,y:o=0,opacity:l=0}={}){const f=getComputedStyle(e),s=+f.opacity,c=f.transform==="none"?"":f.transform,u=s*(1-l);return{delay:t,duration:n,easing:i,css:(a,g)=>`
			transform: ${c} translate(${(1-a)*r}px, ${(1-a)*o}px);
			opacity: ${s-u*g}`}}const ae=[];function je(e,t=O){let n;const i=new Set;function r(f){if(re(e,f)&&(e=f,n)){const s=!ae.length;for(const c of i)c[1](),ae.push(c,e);if(s){for(let c=0;c<ae.length;c+=2)ae[c][0](ae[c+1]);ae.length=0}}}function o(f){r(f(e))}function l(f,s=O){const c=[f,s];return i.add(c),i.size===1&&(n=t(r)||O),f(e),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:r,update:o,subscribe:l}}function Mt(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(Array.isArray(e)){const i=t.map((r,o)=>Mt(e[o],r));return r=>i.map(o=>o(r))}if(n==="number"){const i=t-e;return r=>e+r*i}}function ft(e,t={}){const n=je(e);let i,r=e;function o(l,f){if(e==null)return n.set(e=l),Promise.resolve();r=l;let s=i,c=!1,{delay:u=0,duration:a=400,easing:g=qe,interpolate:d=Mt}=ot(ot({},t),f);if(a===0)return s&&(s.abort(),s=null),n.set(e=r),Promise.resolve();const p=Ve()+u;let _;return i=Ke(k=>{if(k<p)return!0;c||(_=d(e,l),typeof a=="function"&&(a=a(e,l)),c=!0),s&&(s.abort(),s=null);const H=k-p;return H>a?(n.set(e=l),!1):(n.set(e=_(g(H/a))),!0)}),i.promise}return{set:o,update:(l,f)=>o(l(r,e),f),subscribe:n.subscribe}}const Ne=je(0);var _t;const Ot=(_t=globalThis.matchMedia)==null?void 0:_t.call(globalThis,"(prefers-reduced-motion: reduce)").matches,We=e=>({easing:Qe,duration:Ot?0:e}),_e=e=>!e.thumb||`url(${e.thumb})`,Ie=(e,t)=>{if(t){typeof t=="string"&&(t=JSON.parse(t));for(const n in t)e.setAttribute(n,t[n])}};function ct(e){let t,n,i;return{c(){t=$("div"),t.innerHTML='<span class="bp-bar"></span><span class="bp-o"></span>',M(t,"class","bp-load"),C(t,"background-image",_e(e[0]))},m(r,o){P(r,t,o),i=!0},p(r,o){o&1&&C(t,"background-image",_e(r[0]))},i(r){i||(n&&n.end(1),i=!0)},o(r){r&&(n=ge(t,Q,{duration:480})),i=!1},d(r){r&&L(t),r&&n&&n.end()}}}function ut(e){let t,n;return{c(){t=$("div"),M(t,"class","bp-load"),C(t,"background-image",_e(e[0]))},m(i,r){P(i,t,r)},p(i,r){r&1&&C(t,"background-image",_e(i[0]))},i(i){n||te(()=>{n=zt(t,Q,{duration:480}),n.start()})},o:O,d(i){i&&L(t)}}}function Rt(e){let t,n,i=!e[1]&&ct(e),r=e[2]&&ut(e);return{c(){i&&i.c(),t=Ce(),r&&r.c(),n=Ce()},m(o,l){i&&i.m(o,l),P(o,t,l),r&&r.m(o,l),P(o,n,l)},p(o,[l]){o[1]?i&&(ne(),E(i,1,1,()=>{i=null}),ie()):i?(i.p(o,l),l&2&&T(i,1)):(i=ct(o),i.c(),T(i,1),i.m(t.parentNode,t)),o[2]?r?(r.p(o,l),l&4&&T(r,1)):(r=ut(o),r.c(),T(r,1),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(o){T(i),T(r)},o(o){E(i)},d(o){i&&i.d(o),o&&L(t),r&&r.d(o),o&&L(n)}}}function At(e,t,n){let i;de(e,Ne,l=>n(2,i=l));let{activeItem:r}=t,{loaded:o}=t;return e.$$set=l=>{"activeItem"in l&&n(0,r=l.activeItem),"loaded"in l&&n(1,o=l.loaded)},[r,o,i]}class xe extends Se{constructor(t){super(),$e(this,t,At,Rt,re,{activeItem:0,loaded:1})}}function at(e){let t,n,i,r,o,l;return{c(){t=$("img"),M(t,"sizes",n=e[8].sizes||`${e[1]}px`),M(t,"alt",e[7].alt)},m(f,s){P(f,t,s),r=!0,o||(l=[Ee(e[21].call(null,t)),B(t,"error",e[27])],o=!0)},p(f,s){(!r||s[0]&2&&n!==(n=f[8].sizes||`${f[1]}px`))&&M(t,"sizes",n)},i(f){r||(i&&i.end(1),r=!0)},o(f){i=ge(t,Q,{}),r=!1},d(f){f&&L(t),f&&i&&i.end(),o=!1,F(l)}}}function dt(e){let t,n;return t=new xe({props:{activeItem:e[7],loaded:e[2]}}),{c(){be(t.$$.fragment)},m(i,r){oe(t,i,r),n=!0},p(i,r){const o={};r[0]&4&&(o.loaded=i[2]),t.$set(o)},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function Nt(e){let t,n,i,r=`translate3d(${e[0][0]/-2+e[6][0]}px, ${e[0][1]/-2+e[6][1]}px, 0)`,o,l,f,s=e[2]&&at(e),c=e[3]&&dt(e);return{c(){t=$("div"),n=$("div"),s&&s.c(),i=Ce(),c&&c.c(),M(n,"class","bp-img"),C(n,"width",e[0][0]+"px"),C(n,"height",e[0][1]+"px"),R(n,"bp-drag",e[4]),R(n,"bp-canzoom",e[11]>1&&e[0][0]<e[12]),C(n,"background-image",_e(e[7])),C(n,"transform",r),M(t,"class","bp-img-wrap"),R(t,"bp-close",e[5])},m(u,a){P(u,t,a),he(t,n),s&&s.m(n,null),he(n,i),c&&c.m(n,null),o=!0,l||(f=[Ee(e[20].call(null,n)),B(t,"wheel",e[15]),B(t,"pointerdown",e[16]),B(t,"pointermove",e[17]),B(t,"pointerup",e[19]),B(t,"pointercancel",e[18])],l=!0)},p(u,a){u[2]?s?(s.p(u,a),a[0]&4&&T(s,1)):(s=at(u),s.c(),T(s,1),s.m(n,i)):s&&(ne(),E(s,1,1,()=>{s=null}),ie()),u[3]?c?(c.p(u,a),a[0]&8&&T(c,1)):(c=dt(u),c.c(),T(c,1),c.m(n,null)):c&&(ne(),E(c,1,1,()=>{c=null}),ie()),(!o||a[0]&1)&&C(n,"width",u[0][0]+"px"),(!o||a[0]&1)&&C(n,"height",u[0][1]+"px"),(!o||a[0]&16)&&R(n,"bp-drag",u[4]),(!o||a[0]&6145)&&R(n,"bp-canzoom",u[11]>1&&u[0][0]<u[12]),a[0]&65&&r!==(r=`translate3d(${u[0][0]/-2+u[6][0]}px, ${u[0][1]/-2+u[6][1]}px, 0)`)&&C(n,"transform",r),(!o||a[0]&32)&&R(t,"bp-close",u[5])},i(u){o||(T(s),T(c),o=!0)},o(u){E(s),E(c),o=!1},d(u){u&&L(t),s&&s.d(),c&&c.d(),l=!1,F(f)}}}function Yt(e,t,n){let i,r,o,l;de(e,Ne,m=>n(26,o=m));let{props:f}=t,{smallScreen:s}=t,{activeItem:c,opts:u,prev:a,next:g,zoomed:d,container:p}=f;de(e,d,m=>n(25,i=m));let _=c.maxZoom||u.maxZoom||10,k=f.calculateDimensions(c),H=k[0],A,y,N,De,J=0,S,K,le,fe,ke,ce,Pe;const j=+c.width,ye=[],x=new Map,U=ft(k,We(400));de(e,U,m=>n(0,l=m));const Z=ft([0,0],We(400));de(e,Z,m=>n(6,r=m));const we=([m,v],I=l)=>{const w=(I[0]-p.w)/2,D=(I[1]-p.h)/2;return w<0?m=0:m>w?s?(m=S?w+(m-w)/10:w,m>w+20&&n(4,S=a())):m=w:m<-w&&(s?(m=S?-w-(-w-m)/10:-w,m<-w-20&&n(4,S=g())):m=-w),D<0?v=0:v>D?v=D:v<-D&&(v=-D),[m,v]};function ue(m=_,v){if(o)return;const I=k[0]*_;let w=l[0]+l[0]*m,D=l[1]+l[1]*m;if(m>0)w>I&&(w=I,D=k[1]*_),w>j&&(w=j,D=+c.height);else if(w<k[0])return U.set(k),Z.set([0,0]);let{x:V,y:ve,width:et,height:tt}=De.getBoundingClientRect();const nt=v?v.clientX-V-et/2:0,it=v?v.clientY-ve-tt/2:0;V=-nt*(w/et)+nt,ve=-it*(D/tt)+it;const rt=[w,D];U.set(rt).then(()=>{n(1,H=Math.round(Math.max(H,w)))}),Z.set(we([r[0]+V,r[1]+ve],rt))}Object.defineProperty(c,"zoom",{configurable:!0,get:()=>i,set:m=>ue(m?_:-_)});const h=m=>{u.inline&&!i||(m.preventDefault(),ue(m.deltaY/-300,m))},b=m=>{m.button!==2&&(m.preventDefault(),n(4,S=!0),x.set(m.pointerId,m),le=m.clientX,fe=m.clientY,ke=r[0],ce=r[1])},z=m=>{var w;if(x.size>1)return n(4,S=!1),((w=u.noPinch)==null?void 0:w.call(u,p.el))||Y(m);if(!S)return;let v=m.clientX,I=m.clientY;K=ye.push({x:v,y:I})>2,v=v-le,I=I-fe,i||(I<-90&&n(4,S=!u.noClose&&f.close()),Math.abs(I)<30&&(v>40&&n(4,S=a()),v<-40&&n(4,S=g()))),i&&K&&!o&&Z.set(we([ke+v,ce+I]),{duration:0})},Y=m=>{const[v,I]=x.set(m.pointerId,m).values(),w=v.clientX-I.clientX,D=v.clientY-I.clientY,V=Math.hypot(w,D);N=N||{clientX:(v.clientX+I.clientX)/2,clientY:(v.clientY+I.clientY)/2},ue(((J||V)-V)/-35,N),J=V},X=m=>x.delete(m.pointerId);function W(m){var v;if(X(m),N&&(n(4,S=J=0),N=x.size?N:null),!!S){if(n(4,S=!1),m.target===this&&!u.noClose)return f.close();if(K){const[I,w,D]=ye.slice(-3),V=w.x-D.x,ve=w.y-D.y;Math.hypot(V,ve)>5&&Z.set(we([r[0]-(I.x-D.x)*5,r[1]-(I.y-D.y)*5]))}else(v=u.onImageClick)!=null&&v.call(u,p.el,c)||ue(i?-_:_,m);K=!1,ye.length=0}}const ee=m=>{De=m,f.setResizeFunc(()=>{n(24,k=f.calculateDimensions(c)),(u.inline||!s)&&(U.set(k),Z.set([0,0]))}),f.loadImage(c).then(()=>{n(2,A=!0),f.preloadNext()}),setTimeout(()=>{n(3,y=!A)},250)},q=m=>{Ie(m,c.attr),m.srcset=c.img},Le=m=>{var v;return(v=u.onError)==null?void 0:v.call(u,p,c,m)};return e.$$set=m=>{"smallScreen"in m&&n(23,s=m.smallScreen)},e.$$.update=()=>{if(e.$$.dirty[0]&16777217&&d.set(l[0]-10>k[0]),e.$$.dirty[0]&117440512&&o&&i&&!u.intro){const m=We(480);Z.set([0,0],m),U.set(k,m),n(5,Pe=!0)}},[l,H,A,y,S,Pe,r,c,u,d,p,_,j,U,Z,h,b,z,X,W,ee,q,f,s,k,i,o,Le]}class Xt extends Se{constructor(t){super(),$e(this,t,Yt,Nt,re,{props:22,smallScreen:23},null,[-1,-1])}}function Wt(e){let t,n,i,r,o,l;return i=new xe({props:{activeItem:e[2],loaded:e[0]}}),{c(){t=$("div"),n=$("iframe"),be(i.$$.fragment),M(n,"allow","autoplay; fullscreen"),M(n,"title",e[2].title),M(t,"class","bp-if"),C(t,"width",e[1][0]+"px"),C(t,"height",e[1][1]+"px")},m(f,s){P(f,t,s),he(t,n),oe(i,t,null),r=!0,o||(l=[Ee(e[3].call(null,n)),B(n,"load",e[5])],o=!0)},p(f,[s]){const c={};s&1&&(c.loaded=f[0]),i.$set(c),(!r||s&2)&&C(t,"width",f[1][0]+"px"),(!r||s&2)&&C(t,"height",f[1][1]+"px")},i(f){r||(T(i.$$.fragment,f),r=!0)},o(f){E(i.$$.fragment,f),r=!1},d(f){f&&L(t),se(i),o=!1,F(l)}}}function Bt(e,t,n){let{props:i}=t,r,o;const{activeItem:l}=i,f=()=>n(1,o=i.calculateDimensions(l));return f(),i.setResizeFunc(f),[r,o,l,u=>{Ie(u,l.attr),u.src=l.iframe},i,()=>n(0,r=!0)]}class Ft extends Se{constructor(t){super(),$e(this,t,Bt,Wt,re,{props:4})}}function Zt(e){let t,n,i,r,o;return n=new xe({props:{activeItem:e[2],loaded:e[0]}}),{c(){t=$("div"),be(n.$$.fragment),M(t,"class","bp-vid"),C(t,"width",e[1][0]+"px"),C(t,"height",e[1][1]+"px"),C(t,"background-image",_e(e[2]))},m(l,f){P(l,t,f),oe(n,t,null),i=!0,r||(o=Ee(e[3].call(null,t)),r=!0)},p(l,[f]){const s={};f&1&&(s.loaded=l[0]),n.$set(s),(!i||f&2)&&C(t,"width",l[1][0]+"px"),(!i||f&2)&&C(t,"height",l[1][1]+"px")},i(l){i||(T(n.$$.fragment,l),i=!0)},o(l){E(n.$$.fragment,l),i=!1},d(l){l&&L(t),se(n),r=!1,o()}}}function qt(e,t,n){let{props:i}=t,r,o;const{activeItem:l,opts:f,container:s}=i,c=()=>n(1,o=i.calculateDimensions(l));return c(),i.setResizeFunc(c),[r,o,l,a=>{let g;const d=(p,_)=>{var k;Array.isArray(_)||(_=JSON.parse(_));for(const H of _){g||(g=document.createElement((k=H.type)!=null&&k.includes("audio")?"audio":"video"),Ie(g,{controls:!0,autoplay:!0,playsinline:!0,tabindex:"0"}),Ie(g,l.attr));const A=document.createElement(p);Ie(A,H),p=="source"&&(A.onError=y=>{var N;return(N=f.onError)==null?void 0:N.call(f,s,l,y)}),g.append(A)}};d("source",l.sources),d("track",l.tracks||[]),g.oncanplay=()=>n(0,r=!0),a.append(g)},i]}class Vt extends Se{constructor(t){super(),$e(this,t,qt,Zt,re,{props:4})}}function mt(e){let t,n,i,r=e[6].i,o,l,f,s,c,u,a=ht(e),g=e[0].length>1&&gt(e);return{c(){t=$("div"),n=$("div"),a.c(),o=$("div"),l=$("button"),g&&g.c(),M(l,"class","bp-x"),M(l,"title","Close"),M(l,"aria-label","Close"),M(o,"class","bp-controls"),M(t,"class","bp-wrap"),R(t,"bp-zoomed",e[10]),R(t,"bp-inline",e[8]),R(t,"bp-small",e[7]),R(t,"bp-noclose",e[5].noClose)},m(d,p){P(d,t,p),he(t,n),a.m(t,null),he(t,o),he(o,l),g&&g.m(o,null),s=!0,c||(u=[B(l,"click",e[1]),Ee(e[14].call(null,t))],c=!0)},p(d,p){p[0]&64&&re(r,r=d[6].i)?(ne(),E(a,1,1,O),ie(),a=ht(d),a.c(),T(a,1),a.m(t,o)):a.p(d,p),d[0].length>1?g?g.p(d,p):(g=gt(d),g.c(),g.m(o,null)):g&&(g.d(1),g=null),(!s||p[0]&1024)&&R(t,"bp-zoomed",d[10]),(!s||p[0]&256)&&R(t,"bp-inline",d[8]),(!s||p[0]&128)&&R(t,"bp-small",d[7]),(!s||p[0]&32)&&R(t,"bp-noclose",d[5].noClose)},i(d){s||(i&&i.end(1),T(a),f&&f.end(1),s=!0)},o(d){d&&(i=ge(n,Q,{duration:480})),E(a),d&&(f=ge(o,Q,{})),s=!1},d(d){d&&L(t),d&&i&&i.end(),a.d(d),g&&g.d(),d&&f&&f.end(),c=!1,F(u)}}}function Jt(e){let t,n=(e[6].html??e[6].element.outerHTML)+"";return{c(){t=$("div"),M(t,"class","bp-html")},m(i,r){P(i,t,r),t.innerHTML=n},p(i,r){r[0]&64&&n!==(n=(i[6].html??i[6].element.outerHTML)+"")&&(t.innerHTML=n)},i:O,o:O,d(i){i&&L(t)}}}function Kt(e){let t,n;return t=new Ft({props:{props:e[13]()}}),{c(){be(t.$$.fragment)},m(i,r){oe(t,i,r),n=!0},p:O,i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function Ut(e){let t,n;return t=new Vt({props:{props:e[13]()}}),{c(){be(t.$$.fragment)},m(i,r){oe(t,i,r),n=!0},p:O,i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function Gt(e){let t,n;return t=new Xt({props:{props:e[13](),smallScreen:e[7]}}),{c(){be(t.$$.fragment)},m(i,r){oe(t,i,r),n=!0},p(i,r){const o={};r[0]&128&&(o.smallScreen=i[7]),t.$set(o)},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){se(t,i)}}}function pt(e){let t,n=e[6].caption+"",i,r;return{c(){t=$("div"),M(t,"class","bp-cap")},m(o,l){P(o,t,l),t.innerHTML=n,r=!0},p(o,l){(!r||l[0]&64)&&n!==(n=o[6].caption+"")&&(t.innerHTML=n)},i(o){r||(i&&i.end(1),r=!0)},o(o){i=ge(t,Q,{duration:200}),r=!1},d(o){o&&L(t),o&&i&&i.end()}}}function ht(e){let t,n,i,r,o,l,f,s,c;const u=[Gt,Ut,Kt,Jt],a=[];function g(p,_){return p[6].img?0:p[6].sources?1:p[6].iframe?2:3}n=g(e),i=a[n]=u[n](e);let d=e[6].caption&&pt(e);return{c(){t=$("div"),i.c(),d&&d.c(),l=Ce(),M(t,"class","bp-inner")},m(p,_){P(p,t,_),a[n].m(t,null),d&&d.m(p,_),P(p,l,_),f=!0,s||(c=[B(t,"pointerdown",e[20]),B(t,"pointerup",e[21])],s=!0)},p(p,_){let k=n;n=g(p),n===k?a[n].p(p,_):(ne(),E(a[k],1,1,()=>{a[k]=null}),ie(),i=a[n],i?i.p(p,_):(i=a[n]=u[n](p),i.c()),T(i,1),i.m(t,null)),p[6].caption?d?(d.p(p,_),_[0]&64&&T(d,1)):(d=pt(p),d.c(),T(d,1),d.m(l.parentNode,l)):d&&(ne(),E(d,1,1,()=>{d=null}),ie())},i(p){f||(T(i),te(()=>{o&&o.end(1),r=zt(t,e[12],!0),r.start()}),T(d),f=!0)},o(p){E(i),r&&r.invalidate(),o=ge(t,e[12],!1),E(d),f=!1},d(p){p&&L(t),a[n].d(),p&&o&&o.end(),d&&d.d(p),p&&L(l),s=!1,F(c)}}}function gt(e){let t,n=`${e[4]+1} / ${e[0].length}`,i,r,o,l;return{c(){t=$("div"),i=$("button"),r=$("button"),M(t,"class","bp-count"),M(i,"class","bp-prev"),M(i,"title","Previous"),M(i,"aria-label","Previous"),M(r,"class","bp-next"),M(r,"title","Next"),M(r,"aria-label","Next")},m(f,s){P(f,t,s),t.innerHTML=n,P(f,i,s),P(f,r,s),o||(l=[B(i,"click",e[2]),B(r,"click",e[3])],o=!0)},p(f,s){s[0]&17&&n!==(n=`${f[4]+1} / ${f[0].length}`)&&(t.innerHTML=n)},d(f){f&&L(t),f&&L(i),f&&L(r),o=!1,F(l)}}}function Qt(e){let t,n,i=e[0]&&mt(e);return{c(){i&&i.c(),t=Ce()},m(r,o){i&&i.m(r,o),P(r,t,o),n=!0},p(r,o){r[0]?i?(i.p(r,o),o[0]&1&&T(i,1)):(i=mt(r),i.c(),T(i,1),i.m(t.parentNode,t)):i&&(ne(),E(i,1,1,()=>{i=null}),ie())},i(r){n||(T(i),n=!0)},o(r){E(i),n=!1},d(r){i&&i.d(r),r&&L(t)}}}function jt(e,t,n){let i,{items:r=void 0}=t,{target:o=void 0}=t;const l=document.documentElement;let f,s,c,u,a,g,d,p,_;const k=()=>!_.img&&!_.sources&&!_.iframe;let H;const A=h=>H=h,y={},N=je(0);de(e,N,h=>n(10,i=h));const De=h=>{n(5,s=h),n(8,g=s.inline),!g&&l.scrollHeight>l.clientHeight&&l.classList.add("bp-lock"),u=document.activeElement,n(19,y.w=o.offsetWidth,y),n(19,y.h=o===document.body?globalThis.innerHeight:o.clientHeight,y),n(7,a=y.w<769),n(4,f=s.position||0),n(0,r=[]);for(let b=0;b<(s.items.length||1);b++){let z=s.items[b]||s.items;"dataset"in z?r.push({element:z,i:b,...z.dataset}):(z.i=b,r.push(z),z=z.element),s.el&&s.el===z&&n(4,f=b)}},J=()=>{var h;(h=s.onClose)==null||h.call(s,y.el,_),Ne.set(!0),n(0,r=null),u==null||u.focus({preventScroll:!0})},S=()=>le(f-1),K=()=>le(f+1),le=h=>{d=h-f,n(4,f=fe(h))},fe=h=>(h+r.length)%r.length,ke=h=>{const{key:b,shiftKey:z}=h;if(b==="Escape")!s.noClose&&J();else if(b==="ArrowRight")K();else if(b==="ArrowLeft")S();else if(b==="Tab"){const{activeElement:Y}=document;if(z||!Y.controls){h.preventDefault();const{focusWrap:X=y.el}=s,W=[...X.querySelectorAll("*")].filter(q=>q.tabIndex>=0);let ee=W.indexOf(Y);ee+=W.length+(z?-1:1),W[ee%W.length].focus()}}},ce=({width:h=1920,height:b=1080})=>{const{scale:z=.99}=s,Y=Math.min(1,y.w/h*z,y.h/b*z);return[Math.round(h*Y),Math.round(b*Y)]},Pe=()=>{if(r){const h=r[fe(f+1)],b=r[fe(f-1)];!h.preload&&j(h),!b.preload&&j(b)}},j=h=>{if(h.img){const b=document.createElement("img");return b.sizes=s.sizes||`${ce(h)[0]}px`,b.srcset=h.img,h.preload=!0,b.decode().catch(z=>{})}},ye=(h,b)=>!c||!r?(n(18,c=b),s.intro?Q(h,{y:b?10:-10}):x(h)):Q(h,{x:(d>0?20:-20)*(b?1:-1),duration:250}),x=h=>{let b;if(k()){const q=h.firstChild.firstChild;b=[q.clientWidth,q.clientHeight]}else b=ce(_);const z=(_.element||u).getBoundingClientRect(),Y=z.left-(y.w-z.width)/2,X=z.top-(y.h-z.height)/2,W=z.width/b[0],ee=z.height/b[1];return{duration:480,easing:Qe,css:(q,Le)=>`transform:translate3d(${Y*Le}px, ${X*Le}px, 0) scale3d(${W+q*(1-W)}, ${ee+q*(1-ee)}, 1)`}},U=()=>({activeItem:_,calculateDimensions:ce,loadImage:j,preloadNext:Pe,opts:s,prev:S,next:K,close:J,setResizeFunc:A,zoomed:N,container:y}),Z=h=>{var Y;n(19,y.el=h,y);let b;(Y=s.onOpen)==null||Y.call(s,y.el,_),g||globalThis.addEventListener("keydown",ke);const z=new ResizeObserver(X=>{var W;b&&(n(19,y.w=X[0].contentRect.width,y),n(19,y.h=X[0].contentRect.height,y),n(7,a=y.w<769),k()||H==null||H(),(W=s.onResize)==null||W.call(s,y.el,_)),b=!0});return z.observe(h),{destroy(){var X;z.disconnect(),globalThis.removeEventListener("keydown",ke),Ne.set(!1),l.classList.remove("bp-lock"),(X=s.onClosed)==null||X.call(s)}}},we=h=>n(9,p=h.target),ue=function(h){h.button!==2&&h.target===this&&p===this&&!s.noClose&&J()};return e.$$set=h=>{"items"in h&&n(0,r=h.items),"target"in h&&n(15,o=h.target)},e.$$.update=()=>{var h;e.$$.dirty[0]&786545&&r&&(n(6,_=r[f]),c&&((h=s.onUpdate)==null||h.call(s,y.el,_)))},[r,J,S,K,f,s,_,a,g,p,i,N,ye,U,Z,o,De,le,c,y,we,ue]}class xt extends Se{constructor(t){super(),$e(this,t,jt,Qt,re,{items:0,target:15,open:16,close:1,prev:2,next:3,setPosition:17},null,[-1,-1])}get items(){return this.$$.ctx[0]}get target(){return this.$$.ctx[15]}get open(){return this.$$.ctx[16]}get close(){return this.$$.ctx[1]}get prev(){return this.$$.ctx[2]}get next(){return this.$$.ctx[3]}get setPosition(){return this.$$.ctx[17]}}function en(e){return new xt({...e,props:e})}export{en as default};
